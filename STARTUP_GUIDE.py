#!/usr/bin/env python3
"""
校园网流量分析与可视化系统 - 启动说明
Created: 2025-12-01
Status: ✅ 完成
"""

print("""

╔═══════════════════════════════════════════════════════════════════╗
║                                                                   ║
║     🎓 校园网流量分析与可视化系统 - 启动说明 v1.0              ║
║                                                                   ║
╚═══════════════════════════════════════════════════════════════════╝

📌 项目信息
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  项目名称: 校园网流量分析与可视化系统
  项目版本: 1.0（含完整用户画像模块）
  完成时间: 2025 年 12 月 1 日
  项目状态: ✅ 已完成并通过测试


📦 包含的主要功能
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  1. 流量数据分析
     • 总流量统计      - 统计总字节数、数据包数、用户数等
     • 用户流量排名    - TOP N 用户排行榜
     • 应用类别分析    - 各应用类别的流量占比
     • 流量趋势分析    - 按小时统计流量变化趋势
     • 活跃时段分析    - 按小时分析用户活跃度

  2. 用户画像识别（新增模块）✨
     • 智能标签生成    - 自动识别用户行为特征
     • 应用标签        - 游戏狂、视频大户、社交达人等（5类）
     • 时段标签        - 夜猫子、早起族、规律用户等（4类）
     • 安全标签        - 可疑扫描、可疑DNS、异常活动等（3类）
     • 用户数据分析    - 活跃时段、应用占比、协议分布等

  3. 交互式可视化
     • Plotly 图表     - 流量趋势、应用饼图、排行条形图等
     • Chart.js 图表   - 用户应用占比、协议占比、活跃时段等
     • 用户标签卡片    - 彩色标签展示，点击查看详情
     • 响应式设计      - 完美适配各种屏幕尺寸

  4. Web 应用功能
     • 文件上传        - 支持 CSV 格式文件上传
     • 自动分析        - 上传后自动重新分析和生成报告
     • API 接口        - JSON 格式数据接口
     • 实时刷新        - 无需重启应用，自动更新数据


🚀 快速启动步骤
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  第 1 步：安装依赖
  ────────────────────────
  $ pip install -r requirements.txt

  第 2 步：启动应用
  ────────────────────────
  方式 1（推荐）- 使用启动脚本：
  $ ./run.sh

  方式 2 - 直接运行：
  $ python3 app.py

  第 3 步：访问应用
  ────────────────────────
  打开浏览器访问：
  🌐 http://localhost:5000

  第 4 步：查看用户画像（新功能）
  ────────────────────────
  1. 点击 Dashboard 按钮进入仪表板
  2. 向下滚动找到"👤 用户画像分析"部分
  3. 查看用户标签卡片（前 12 个用户）
  4. 点击卡片查看该用户的详细分析图表


📊 主要页面说明
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  【首页 / 】
  ├─ 展示总体统计信息
  ├─ 活跃用户数、总流量、IP 数量等
  └─ 提供 CSV 文件上传功能

  【仪表板 /dashboard】
  ├─ 流量趋势分析
  ├─ 应用类别分布
  ├─ 用户流量排行
  ├─ 活跃时段分析
  └─ 👤 用户画像分析（新增）
     ├─ 用户标签卡片展示
     ├─ 用户应用占比饼图
     ├─ 用户协议占比饼图
     └─ 用户活跃时段柱状图

  【API 接口】
  ├─ GET /api/stats           → 流量统计数据
  └─ GET /api/user_profiles   → 用户画像数据


🎯 用户画像标签说明
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  【应用标签】应用行为特征
  ├─ 🎮 游戏狂       (游戏流量 > 30%)
  ├─ 🎥 视频大户     (视频流量 > 40%)
  ├─ 💬 社交达人     (社交通讯 > 30%)
  ├─ 📚 学习型用户   (教育流量 > 20%)
  └─ 🔧 技术用户     (特殊端口访问 > 20)

  【时段标签】活动时间特征
  ├─ 🌙 夜猫子       (夜间流量 > 40%)
  ├─ 🌅 早起族       (早晨流量 > 30%)
  ├─ 📅 规律用户     (活跃时间稳定)
  └─ 📊 波动用户     (活跃时间波动)

  【安全标签】潜在风险标识
  ├─ ⚠️  可疑扫描     (多端口快速访问)
  ├─ 🔍 可疑DNS      (DNS 查询次数 > 50)
  └─ 🚨 异常活跃时间 (夜间流量 > 60%)


📁 项目文件结构
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  流量分析/
  ├── app.py                    # Flask 主程序
  ├── utils/
  │   ├── analysis.py           # 流量分析模块
  │   └── user_profile.py       # 用户画像分析（新增）✨
  ├── templates/
  │   ├── index.html            # 首页
  │   └── dashboard.html        # 仪表板（含用户画像部分）
  ├── data/
  │   ├── traffic.csv           # 示例流量数据
  │   └── user_profiles.json    # 用户画像输出
  ├── static/                   # 静态文件（CSS/JS）
  ├── requirements.txt          # 依赖配置
  ├── README.md                 # 完整文档
  ├── run.sh                    # 快速启动脚本
  ├── check_project.py          # 项目检查工具
  ├── PROJECT_SUMMARY.md        # 完成总结
  └── DELIVERY_CHECKLIST.md     # 交付清单


📚 文件上传说明
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  支持格式: CSV (逗号分隔值)
  最大大小: 50 MB
  
  CSV 文件格式要求:
  ┌─────────────────────────────────────────────────────────────┐
  │ timestamp,src_ip,dst_ip,src_port,dst_port,protocol,bytes,   │
  │ app_category,user                                            │
  │                                                              │
  │ 示例:                                                        │
  │ 2025-12-01 08:00:15,192.168.1.100,8.8.8.8,52341,53,UDP,    │
  │ 256,DNS,student_001                                          │
  └─────────────────────────────────────────────────────────────┘


🔧 故障排除
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  问题 1：ModuleNotFoundError: No module named 'flask'
  解决：pip install -r requirements.txt

  问题 2：Flask 应用无法启动
  解决：检查端口 5000 是否被占用，或修改 app.run() 中的 port 参数

  问题 3：图表不显示
  解决：检查浏览器控制台错误，确保 Plotly 和 Chart.js 已加载

  问题 4：用户画像不显示
  解决：检查 data/user_profiles.json 是否存在，或手动运行
       python3 utils/user_profile.py

  帮助：运行项目检查工具
  $ python3 check_project.py


🔍 验证安装
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  运行项目检查工具来验证所有功能：
  $ python3 check_project.py

  这将检查：
  ✓ 项目文件结构
  ✓ 依赖包完整性
  ✓ 数据分析结果
  ✓ API 端点
  ✓ 功能特性


💡 使用提示
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  1. 上传新 CSV 文件后，系统会自动：
     • 重新加载数据
     • 重新分析流量
     • 重新生成用户画像
     • 更新所有图表

  2. 点击用户标签卡片可以：
     • 查看该用户的应用占比
     • 查看该用户的协议分布
     • 查看该用户的活跃时段

  3. API 接口可用于：
     • 集成到其他系统
     • 数据导出和分析
     • 第三方应用集成


🎓 示例数据
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  项目中已包含示例数据：
  • 102 条流量记录
  • 75 个用户
  • 生成的用户画像中包含：
    - 20% 的视频大户
    - 18.7% 的早起族
    - 14.7% 的社交达人
    - 14.7% 的波动用户


⚙️  系统要求
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  • Python 3.8+
  • pip 包管理器
  • 现代浏览器（Chrome/Firefox/Safari）
  • 至少 100MB 磁盘空间
  • 网络连接（加载 CDN 资源）


📞 获取帮助
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  详细文档：
  • README.md           - 完整使用文档
  • PROJECT_SUMMARY.md  - 项目完成总结
  • DELIVERY_CHECKLIST.md - 交付清单

  检查工具：
  • python3 check_project.py - 项目完整性检查


✨ 新增功能亮点
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ✨ 用户画像分析模块
  ✨ 智能标签识别系统
  ✨ 三维度用户分类（应用、时段、安全）
  ✨ 用户行为特征提取
  ✨ 交互式用户详情展示


🎉 开始使用
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  1. 安装依赖：
     $ pip install -r requirements.txt

  2. 启动应用：
     $ ./run.sh

  3. 访问应用：
     打开浏览器访问 http://localhost:5000

  4. 享受分析！🎊


╔═══════════════════════════════════════════════════════════════════╗
║                     项目已准备就绪！                             ║
║                  祝您使用愉快！🌟                                ║
╚═══════════════════════════════════════════════════════════════════╝

最后更新：2025 年 12 月 1 日

""")
